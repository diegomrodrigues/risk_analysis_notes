# Backtesting VAR: O Teste da RazÃ£o de VerossimilhanÃ§a para Cobertura Incondicional

## IntroduÃ§Ã£o

Como discutido anteriormente, os modelos de Value-at-Risk (VAR) sÃ£o ferramentas cruciais para a gestÃ£o de riscos financeiros, mas sua utilidade depende da precisÃ£o com que predizem as perdas potenciais[^1]. A validaÃ§Ã£o do modelo, que inclui o *backtesting*, Ã© essencial para garantir essa precisÃ£o[^1]. Este capÃ­tulo se aprofunda no *backtesting* de modelos VAR, especificamente no uso do teste da razÃ£o de verossimilhanÃ§a (Likelihood Ratio test) para verificar a cobertura incondicional. Este teste avalia se a taxa de falha observada em um modelo VAR Ã© consistente com a taxa de falha esperada, fornecendo uma avaliaÃ§Ã£o crÃ­tica da calibraÃ§Ã£o do modelo.

## Conceitos Fundamentais

O *backtesting* de um modelo VAR envolve a comparaÃ§Ã£o sistemÃ¡tica das previsÃµes VAR histÃ³ricas com os retornos subsequentes do portfÃ³lio[^1]. O objetivo Ã© verificar se as perdas reais estÃ£o alinhadas com as perdas projetadas. Um modelo bem calibrado deve ter um nÃºmero de *exceÃ§Ãµes* (isto Ã©, ocorrÃªncias em que a perda real excede a previsÃ£o VAR) em linha com o nÃ­vel de confianÃ§a especificado[^2].

O teste da razÃ£o de verossimilhanÃ§a (LR) para cobertura incondicional, denotado como $\text{LR}_{\text{uc}}$, Ã© uma ferramenta estatÃ­stica que formaliza esse processo[^9]. Este teste examina se a proporÃ§Ã£o de vezes que o VAR Ã© excedido em uma amostra (a *taxa de falha*) Ã© estatisticamente consistente com a taxa de falha esperada, dada a confianÃ§a do VAR[^5]. A hipÃ³tese nula para este teste Ã© que o modelo VAR estÃ¡ corretamente calibrado.

Para entender o $\text{LR}_{\text{uc}}$, precisamos introduzir alguns conceitos-chave:

1. **Taxa de Falha (Failure Rate):** A taxa de falha Ã© a proporÃ§Ã£o de vezes que as perdas reais excedem o VAR previsto em um perÃ­odo de amostra. Se um modelo VAR Ã© especificado com 99% de confianÃ§a, espera-se que as exceÃ§Ãµes ocorram em aproximadamente 1% do tempo[^2]. Formalmente, a taxa de falha Ã© calculada como $N/T$, onde *N* Ã© o nÃºmero de exceÃ§Ãµes observadas e *T* Ã© o nÃºmero total de observaÃ§Ãµes.

2. **HipÃ³tese Nula (Null Hypothesis):** A hipÃ³tese nula para o teste $\text{LR}_{\text{uc}}$ Ã© que o modelo VAR estÃ¡ corretamente calibrado, ou seja, a taxa de falha observada (N/T) Ã© igual Ã  taxa de falha esperada, que Ã© (1-c), onde *c* Ã© o nÃ­vel de confianÃ§a do VAR[^5]. Por exemplo, se o VAR Ã© calculado com 99% de confianÃ§a, a taxa de falha esperada seria 1%.

3. **Teste NÃ£o ParamÃ©trico:** O teste $\text{LR}_{\text{uc}}$ Ã© um teste *nÃ£o paramÃ©trico*, o que significa que ele nÃ£o assume uma distribuiÃ§Ã£o especÃ­fica para os retornos do portfÃ³lio[^5]. Isso o torna robusto para diferentes tipos de dados, incluindo distribuiÃ§Ãµes normais, assimÃ©tricas, com caudas pesadas ou mesmo que variam com o tempo[^5].

**ProposiÃ§Ã£o 1.** *A taxa de falha observada, $N/T$, pode ser vista como uma estimativa da probabilidade de ocorrÃªncia de exceÃ§Ãµes. Em uma amostra suficientemente grande, espera-se que essa estimativa se aproxime da taxa de falha esperada (1-c), dado que o modelo VAR estÃ¡ bem calibrado.*

> ðŸ’¡ **Exemplo NumÃ©rico:** Suponha que um modelo VAR com nÃ­vel de confianÃ§a de 95% seja usado para prever as perdas diÃ¡rias de um portfÃ³lio. ApÃ³s 500 dias, observamos 30 exceÃ§Ãµes (dias em que a perda real excedeu o VAR previsto). A taxa de falha observada seria $N/T = 30/500 = 0.06$ ou 6%. A taxa de falha esperada, com um nÃ­vel de confianÃ§a de 95%, Ã© $1 - 0.95 = 0.05$ ou 5%. Este exemplo ilustra como a taxa de falha observada Ã© uma estimativa da probabilidade de exceÃ§Ãµes e como ela pode ser comparada com a taxa esperada.

**Lema 1.** *Sob a hipÃ³tese nula, a estatÃ­stica $N$, o nÃºmero de exceÃ§Ãµes observadas, segue uma distribuiÃ§Ã£o binomial com parÃ¢metros $T$ (nÃºmero total de observaÃ§Ãµes) e $p$ (taxa de falha esperada). Isso significa que $N \sim \text{Binomial}(T, p)$.*

*Prova:*
1. Cada observaÃ§Ã£o (dia) pode resultar em duas possibilidades: ou ocorre uma exceÃ§Ã£o (a perda excede o VAR) ou nÃ£o ocorre.
2. A probabilidade de uma exceÃ§Ã£o ocorrer em um determinado dia Ã© constante e igual a $p$, que Ã© a taxa de falha esperada.
3. As ocorrÃªncias de exceÃ§Ãµes em diferentes dias sÃ£o independentes, ou seja, a ocorrÃªncia de uma exceÃ§Ã£o em um dia nÃ£o afeta a probabilidade de ocorrÃªncia em outro dia.
4. Dado que temos *T* tentativas independentes (dias), cada uma com probabilidade *p* de sucesso (ocorrÃªncia de uma exceÃ§Ã£o), a distribuiÃ§Ã£o de *N*, o nÃºmero total de exceÃ§Ãµes, segue uma distribuiÃ§Ã£o binomial com parÃ¢metros *T* e *p*.

Portanto, $N \sim \text{Binomial}(T, p)$. â– 

**Lema 1.1.** *A mÃ©dia e a variÃ¢ncia da distribuiÃ§Ã£o binomial de $N$ sÃ£o dadas por $E[N] = Tp$ e $Var[N] = Tp(1-p)$, respectivamente.*

*Prova:*
1. A mÃ©dia (valor esperado) de uma distribuiÃ§Ã£o binomial Ã© definida como o produto do nÃºmero de tentativas ($T$) e a probabilidade de sucesso em cada tentativa ($p$). Portanto, $E[N] = Tp$.
2. A variÃ¢ncia de uma distribuiÃ§Ã£o binomial Ã© definida como o produto do nÃºmero de tentativas ($T$), a probabilidade de sucesso ($p$) e a probabilidade de fracasso $(1-p)$. Portanto, $Var[N] = Tp(1-p)$. â– 

> ðŸ’¡ **Exemplo NumÃ©rico:** Se tivermos 250 observaÃ§Ãµes ($T = 250$) e a taxa de falha esperada for de 1% ($p = 0.01$), entÃ£o o nÃºmero esperado de exceÃ§Ãµes seria $E[N] = 250 \times 0.01 = 2.5$. A variÃ¢ncia seria $Var[N] = 250 \times 0.01 \times (1 - 0.01) = 2.475$. Este exemplo mostra como calcular o valor esperado e a variÃ¢ncia do nÃºmero de exceÃ§Ãµes usando os parÃ¢metros da distribuiÃ§Ã£o binomial.

**Lema 1.2.** *A distribuiÃ§Ã£o binomial de N pode ser aproximada por uma distribuiÃ§Ã£o normal com mÃ©dia $Tp$ e variÃ¢ncia $Tp(1-p)$ quando T Ã© grande (pelo Teorema do Limite Central). Esta aproximaÃ§Ã£o Ã© Ãºtil para derivar o teste $\text{LR}_{\text{uc}}$.*

## CÃ¡lculo do $\text{LR}_{\text{uc}}$

O $\text{LR}_{\text{uc}}$ Ã© calculado usando a seguinte fÃ³rmula:

$$\text{LR}_{\text{uc}} = -2 \ln[(1 - p)^{T-N} p^N] + 2 \ln{[1 - (N/T)]^{T-N} (N/T)^N}$$[^9]

Onde:
- *p* Ã© a taxa de falha esperada (1 - nÃ­vel de confianÃ§a)
- *N* Ã© o nÃºmero de exceÃ§Ãµes observadas
- *T* Ã© o nÃºmero total de observaÃ§Ãµes

O primeiro termo da equaÃ§Ã£o representa a log-verossimilhanÃ§a sob a hipÃ³tese nula e o segundo termo representa a log-verossimilhanÃ§a para o nÃºmero de exceÃ§Ãµes observadas[^9]. O teste Ã© construÃ­do para verificar se a diferenÃ§a entre essas duas verossimilhanÃ§as Ã© significativamente grande, o que indicaria que o modelo nÃ£o Ã© calibrado corretamente.

Sob a hipÃ³tese nula, a estatÃ­stica $\text{LR}_{\text{uc}}$ segue assintoticamente uma distribuiÃ§Ã£o qui-quadrado com um grau de liberdade[^9]. Isso significa que, para amostras grandes, podemos usar a distribuiÃ§Ã£o qui-quadrado para avaliar a significÃ¢ncia estatÃ­stica do resultado do teste.

## InterpretaÃ§Ã£o do Teste

### 1. Valor CrÃ­tico

Com um nÃ­vel de confianÃ§a de 95%, o valor crÃ­tico da distribuiÃ§Ã£o qui-quadrado com um grau de liberdade Ã© de 3.841[^9]. Se o valor calculado de $\text{LR}_{\text{uc}}$ for maior que 3.841, rejeitamos a hipÃ³tese nula, o que sugere que o modelo VAR estÃ¡ mal calibrado.

### 2. Tipo de Erro I e II

Ã‰ importante entender que, como em todos os testes de hipÃ³teses, existem dois tipos de erros que podemos cometer[^8, ^11]:

- **Erro do Tipo I (Falso Positivo):** Rejeitamos a hipÃ³tese nula quando ela Ã© verdadeira. Ou seja, concluÃ­mos que o modelo VAR estÃ¡ mal calibrado, quando na verdade ele estÃ¡ bem calibrado[^5].
- **Erro do Tipo II (Falso Negativo):** NÃ£o rejeitamos a hipÃ³tese nula quando ela Ã© falsa. Ou seja, concluÃ­mos que o modelo VAR estÃ¡ bem calibrado, quando na verdade ele estÃ¡ mal calibrado[^5].

Ã‰ necessÃ¡rio equilibrar esses dois tipos de erros ao escolher o nÃ­vel de confianÃ§a do teste[^8].
*A probabilidade de cometer um erro do tipo I Ã© diretamente controlada pelo nÃ­vel de confianÃ§a do teste, e a probabilidade de cometer um erro do tipo II diminui quando aumentamos o nÃºmero de observaÃ§Ãµes*.

> ðŸ’¡ **Exemplo NumÃ©rico:** Suponha que, em um cenÃ¡rio com um modelo VAR bem calibrado com 99% de confianÃ§a, observamos um valor $\text{LR}_{\text{uc}}$ de 4.5 (com um valor crÃ­tico de 3.841 para um nÃ­vel de confianÃ§a de 95%). Este valor nos levaria a rejeitar a hipÃ³tese nula, cometendo um Erro do Tipo I. Por outro lado, se tivermos um modelo VAR que estÃ¡ com uma taxa de falha de 3% quando a esperada Ã© de 1% (mal calibrado) mas, por uma amostra pequena, obtemos um valor $\text{LR}_{\text{uc}}$ de 2.1, falharÃ­amos em rejeitar a hipÃ³tese nula, cometendo um Erro do Tipo II.

A tabela a seguir sumariza os possÃ­veis cenÃ¡rios:

| DecisÃ£o do Teste $\text{LR}_{\text{uc}}$ | Modelo VAR Bem Calibrado | Modelo VAR Mal Calibrado |
| ---------------------------------------- | ------------------------ | ------------------------ |
| Rejeita HipÃ³tese Nula                    | Erro do Tipo I           | DecisÃ£o Correta          |
| NÃ£o Rejeita HipÃ³tese Nula                | DecisÃ£o Correta          | Erro do Tipo II          |

### 3. Poder do Teste

O poder do teste se refere Ã  probabilidade de rejeitar corretamente um modelo VAR mal calibrado[^8]. O poder do teste $\text{LR}_{\text{uc}}$ Ã© geralmente baixo, especialmente para valores pequenos de *p* (ou seja, quando o nÃ­vel de confianÃ§a do VAR Ã© alto) e quando o nÃºmero de observaÃ§Ãµes Ã© baixo[^9]. Isto Ã© porque a ocorrÃªncia de exceÃ§Ãµes nesses cenÃ¡rios Ã© rara, e sÃ£o necessÃ¡rios mais dados para detectar um desvio significativo da taxa de falha esperada.

**Teorema 1.** *O teste $\text{LR}_{\text{uc}}$ pode ser interpretado como um teste da razÃ£o de verossimilhanÃ§a entre a hipÃ³tese nula (o modelo VAR estÃ¡ bem calibrado) e a hipÃ³tese alternativa (o modelo VAR nÃ£o estÃ¡ bem calibrado). O termo $-2 \ln[(1 - p)^{T-N} p^N]$ representa a log-verossimilhanÃ§a sob a hipÃ³tese nula, enquanto o termo $-2 \ln{[1 - (N/T)]^{T-N} (N/T)^N}$ representa a log-verossimilhanÃ§a sob a hipÃ³tese alternativa de que a taxa de falha observada Ã© a melhor estimativa da taxa de falha verdadeira.*

**Teorema 1.1** *Uma formulaÃ§Ã£o equivalente para o teste $\text{LR}_{\text{uc}}$ que pode ser mais intuitiva em certas situaÃ§Ãµes Ã©:*

$$\text{LR}_{\text{uc}} = 2 \left[ N \ln\left(\frac{N/T}{p}\right) + (T-N) \ln\left(\frac{1-N/T}{1-p}\right) \right]$$

*Prova:*
1. ComeÃ§amos com a fÃ³rmula original:
   $$\text{LR}_{\text{uc}} = -2 \ln[(1 - p)^{T-N} p^N] + 2 \ln{[1 - (N/T)]^{T-N} (N/T)^N}$$

2. Usando propriedades dos logaritmos, expandimos cada termo:
   $$\text{LR}_{\text{uc}} = -2[(T-N)\ln(1-p) + N\ln(p)] + 2[(T-N)\ln(1-N/T) + N\ln(N/T)]$$

3. Distribuindo o -2 e 2 nos termos dentro dos colchetes:
   $$\text{LR}_{\text{uc}} = -2(T-N)\ln(1-p) -2N\ln(p) + 2(T-N)\ln(1-N/T) + 2N\ln(N/T)$$

4. Reorganizando os termos:
   $$\text{LR}_{\text{uc}} = 2N\ln(N/T) - 2N\ln(p) + 2(T-N)\ln(1-N/T) - 2(T-N)\ln(1-p)$$

5. Fatorando 2N e 2(T-N):
   $$\text{LR}_{\text{uc}} = 2N[\ln(N/T) - \ln(p)] + 2(T-N)[\ln(1-N/T) - \ln(1-p)]$$

6. Usando as propriedades dos logaritmos de que $\ln(a)-\ln(b) = \ln(a/b)$:
   $$\text{LR}_{\text{uc}} = 2 \left[ N \ln\left(\frac{N/T}{p}\right) + (T-N) \ln\left(\frac{1-N/T}{1-p}\right) \right]$$

Portanto, a formulaÃ§Ã£o equivalente para o teste $\text{LR}_{uc}$ Ã© demonstrada. â– 

> ðŸ’¡ **Exemplo NumÃ©rico:** Usando os dados do exemplo anterior (30 exceÃ§Ãµes em 500 dias, com nÃ­vel de confianÃ§a de 95%): $N = 30$, $T = 500$, e $p = 0.05$. Aplicando a nova fÃ³rmula:
>
> $\text{Step 1: } \text{LR}_{\text{uc}} = 2 \left[ 30 \ln\left(\frac{30/500}{0.05}\right) + (500-30) \ln\left(\frac{1-30/500}{1-0.05}\right) \right]$
>
> $\text{Step 2: } \text{LR}_{\text{uc}} = 2 \left[ 30 \ln\left(\frac{0.06}{0.05}\right) + 470 \ln\left(\frac{0.94}{0.95}\right) \right]$
>
> $\text{Step 3: } \text{LR}_{\text{uc}} = 2 [30 \ln(1.2) + 470 \ln(0.9895)]$
>
> $\text{Step 4: } \text{LR}_{\text{uc}} = 2 [30 \times 0.1823 + 470 \times (-0.0105)]$
>
> $\text{Step 5: } \text{LR}_{\text{uc}} = 2 [5.469 - 4.9335]$
>
> $\text{Step 6: } \text{LR}_{\text{uc}} = 2[0.5355] = 1.071$
>
> Neste caso, o valor do $\text{LR}_{\text{uc}}$ Ã© 1.071. Como este valor Ã© menor que 3.841, nÃ£o rejeitarÃ­amos a hipÃ³tese nula, sugerindo que o modelo estÃ¡ bem calibrado.

**Teorema 1.2.** *A estatÃ­stica $\text{LR}_{\text{uc}}$ tambÃ©m pode ser expressa em termos da razÃ£o entre a verossimilhanÃ§a sob a hipÃ³tese alternativa e a verossimilhanÃ§a sob a hipÃ³tese nula, de forma que:*

$$\text{LR}_{\text{uc}} = 2 \ln \left( \frac{L(p = N/T)}{L(p)} \right)$$

*Onde L(p=N/T) Ã© a verossimilhanÃ§a quando a taxa de falha Ã© a observada e L(p) Ã© a verossimilhanÃ§a quando a taxa de falha Ã© a esperada.*

*Prova:*
1. A funÃ§Ã£o de verossimilhanÃ§a para uma distribuiÃ§Ã£o binomial Ã© dada por:
   $$L(p) = (1-p)^{T-N} p^N$$

2. A log-verossimilhanÃ§a Ã© entÃ£o:
   $$\ln(L(p)) = (T-N)\ln(1-p) + N\ln(p)$$

3. A log-verossimilhanÃ§a sob a hipÃ³tese nula (usando a taxa de falha esperada $p$) Ã©:
   $$\ln(L(p)) = (T-N)\ln(1-p) + N\ln(p)$$

4. A log-verossimilhanÃ§a sob a hipÃ³tese alternativa (usando a taxa de falha observada $N/T$) Ã©:
   $$\ln(L(p=N/T)) = (T-N)\ln(1-N/T) + N\ln(N/T)$$

5. O teste $\text{LR}_{\text{uc}}$ Ã© definido como:
   $$\text{LR}_{\text{uc}} = -2 \ln(L(p)) + 2 \ln(L(p=N/T))$$

6. Que pode ser reescrito como:
   $$\text{LR}_{\text{uc}} = 2[\ln(L(p=N/T)) - \ln(L(p))]$$

7. Usando as propriedades dos logaritmos:
   $$\text{LR}_{\text{uc}} = 2 \ln \left( \frac{L(p = N/T)}{L(p)} \right)$$

Portanto, demonstramos que a estatÃ­stica $\text{LR}_{\text{uc}}$ pode ser expressa como o logaritmo da razÃ£o das verossimilhanÃ§as. â– 

**CorolÃ¡rio 1.1** *Quando a taxa de falha observada (N/T) Ã© igual Ã  taxa de falha esperada (p), o valor de $\text{LR}_{\text{uc}}$ serÃ¡ zero. Isso ocorre porque cada um dos termos dentro do logaritmo na expressÃ£o do Teorema 1.1 serÃ¡ igual a 1, e o logaritmo de 1 Ã© zero.*

*Prova:*
1. A expressÃ£o do Teorema 1.1 para $\text{LR}_{\text{uc}}$ Ã©:
   $$\text{LR}_{\text{uc}} = 2 \left[ N \ln\left(\frac{N/T}{p}\right) + (T-N) \ln\left(\frac{1-N/T}{1-p}\right) \right]$$

2. Se $N/T = p$, entÃ£o a expressÃ£o se torna:
   $$\text{LR}_{\text{uc}} = 2 \left[ N \ln\left(\frac{p}{p}\right) + (T-N) \ln\left(\frac{1-p}{1-p}\right) \right]$$

3. Simplificando, obtemos:
   $$\text{LR}_{\text{uc}} = 2 [N \ln(1) + (T-N) \ln(1)]$$

4. Como $\ln(1) = 0$, a expressÃ£o se torna:
   $$\text{LR}_{\text{uc}} = 2 [N(0) + (T-N)(0)] = 2[0+0] = 0$$

Portanto, quando a taxa de falha observada Ã© igual Ã  taxa de falha esperada, o valor de $\text{LR}_{\text{uc}}$ Ã© zero. â– 

**CorolÃ¡rio 1.2** *O valor de $\text{LR}_{\text{uc}}$ Ã© sempre nÃ£o negativo. Isso ocorre porque a funÃ§Ã£o log-verossimilhanÃ§a atingirÃ¡ seu mÃ¡ximo quando a probabilidade de sucesso for igual a frequÃªncia observada. Ou seja, L(p=N/T) >= L(p).*

*Prova:*
1. Pelo Teorema 1.2, temos que:
   $$\text{LR}_{\text{uc}} = 2 \ln \left( \frac{L(p = N/T)}{L(p)} \right)$$

2. A log-verossimilhanÃ§a $L(p)$ alcanÃ§a seu valor mÃ¡ximo quando $p$ Ã© igual Ã  frequÃªncia observada, $N/T$. Isso significa que $L(p = N/T)$ representa a mÃ¡xima verossimilhanÃ§a atingÃ­vel.

3. Assim, a razÃ£o $\frac{L(p = N/T)}{L(p)}$ serÃ¡ sempre maior ou igual a 1, ou seja, $\frac{L(p = N/T)}{L(p)} \geq 1$.

4. Como a funÃ§Ã£o logaritmo Ã© crescente, $\ln\left(\frac{L(p = N/T)}{L(p)}\right) \geq \ln(1) = 0$.

5. Portanto, como o $\text{LR}_{\text{uc}}$ Ã© duas vezes o logaritmo dessa razÃ£o, temos que $\text{LR}_{\text{uc}} = 2 \ln\left(\frac{L(p = N/T)}{L(p)}\right) \geq 0$.

Assim, o valor de $\text{LR}_{\text{uc}}$ Ã© sempre nÃ£o negativo. â– 

**ProposiÃ§Ã£o 2.** *Para amostras grandes, sob a hipÃ³tese nula, a estatÃ­stica $\text{LR}_{\text{uc}}$ converge em distribuiÃ§Ã£o para uma qui-quadrado com um grau de liberdade. Esta convergÃªncia Ã© uma consequÃªncia da teoria assintÃ³tica para testes de razÃ£o de verossimilhanÃ§a e Ã© crucial para a interpretaÃ§Ã£o estatÃ­stica do teste.*

**ProposiÃ§Ã£o 2.1.** *A aproximaÃ§Ã£o pela distribuiÃ§Ã£o qui-quadrado melhora Ã  medida que o nÃºmero de observaÃ§Ãµes (T) aumenta. Para amostras pequenas, a distribuiÃ§Ã£o exata da estatÃ­stica $\text{LR}_{\text{uc}}$ pode diferir da qui-quadrado, o que significa que o teste pode nÃ£o ser tÃ£o confiÃ¡vel para essas amostras.*

## Exemplo

Vamos analisar o exemplo do JP Morgan citado no texto[^6]. A JPM observou 20 exceÃ§Ãµes em 252 dias, usando um VAR de 95%. Assim, $p = 0.05$, $N = 20$, e $T = 252$. Aplicando a fÃ³rmula do $\text{LR}_{\text{uc}}$, temos:

$$\text{LR}_{\text{uc}} = -2 \ln[(1 - 0.05)^{252-20} 0.05^{20}] + 2 \ln{[1 - (20/252)]^{252-20} (20/252)^{20}}$$
$$\text{LR}_{\text{uc}} = 3.91$$

Como 3.91 > 3.841, rejeitamos a hipÃ³tese nula de que o modelo VAR Ã© bem calibrado, conforme esperado[^9].

> ðŸ’¡ **Exemplo NumÃ©rico:** Para calcular o exemplo do JP Morgan, vamos detalhar cada etapa:
>
> $\text{Step 1: } \text{LR}_{\text{uc}} = -2 \ln[(0.95)^{232} (0.05)^{20}] + 2 \ln{[(1-0.079)^{232} (0.079)^{20}]}$
>
> $\text{Step 2: } \text{LR}_{\text{uc}} = -2 [232 \ln(0.95) + 20 \ln(0.05)] + 2 [232 \ln(0.921) + 20 \ln(0.079)]$
>
> $\text{Step 3: } \text{LR}_{\text{uc}} = -2 [232(-0.0513) + 20(-2.9957)] + 2 [232(-0.0823) + 20(-2.5383)]$
>
> $\text{Step 4: } \text{LR}_{\text{uc}} = -2 [-11.9016 -59.914] + 2 [-19.104 - 50.766]$
>
> $\text{Step 5: } \text{LR}_{\text{uc}} = -2 [-71.8156] + 2 [-69.87]$
>
> $\text{Step 6: } \text{LR}_{\text{uc}} = 143.6312 - 139.74 = 3.8912$
>
> O valor de $\text{LR}_{\text{uc}}$ Ã© aproximadamente 3.89, que Ã© maior do que o valor crÃ­tico de 3.841 (nÃ­vel de confianÃ§a de 95%), levando a rejeitar a hipÃ³tese nula.

## ConclusÃ£o

O teste $\text{LR}_{\text{uc}}$ Ã© uma ferramenta essencial para avaliar a cobertura incondicional de modelos VAR. Ele quantifica se o nÃºmero de exceÃ§Ãµes observadas Ã© estatisticamente consistente com o nÃ­vel de confianÃ§a do modelo VAR. No entanto, Ã© importante considerar as limitaÃ§Ãµes do teste, especialmente a possibilidade de erros do tipo I e II e o poder do teste, que pode ser baixo quando o nÃºmero de observaÃ§Ãµes Ã© pequeno ou quando o nÃ­vel de confianÃ§a do VAR Ã© alto. AlÃ©m disso, o teste $\text{LR}_{\text{uc}}$, quando usado isoladamente, pode ser insuficiente para diagnosticar todas as possÃ­veis deficiÃªncias de um modelo VAR, uma vez que ele nÃ£o considera, por exemplo, a possibilidade de agrupamento das exceÃ§Ãµes[^13]. Portanto, deve ser complementado com outras tÃ©cnicas de *backtesting*, como testes de cobertura condicional e anÃ¡lises grÃ¡ficas, para garantir a robustez da avaliaÃ§Ã£o do risco[^13, ^16].

## ReferÃªncias

[^1]: *"Value-at-risk (VAR) models are only useful insofar as they predict risk reasonably well. This is why the application of these models always should be accompanied by validation."*
[^2]: *"When the model is perfectly calibrated, the number of observations falling outside VAR should be in line with the confidence level. The number of exceedences is also known as the number of exceptions."*
[^3]: *"Backtesting is a formal statistical framework that consists of verifying that actual losses are in line with projected losses. This involves systematically comparing the history of VAR forecasts with their associated portfolio returns."*
[^4]: *"These procedures, sometimes called reality checks, are essential for VAR users and risk managers, who need to check that their VAR forecasts are well calibrated."*
[^5]: *"The simplest method to verify the accuracy of the model is to record the failure rate, which gives the proportion of times VAR is exceeded in a given sample... We want to know, at a given confidence level, whether N is too small or too large under the null hypothesis that p = 0.01 in a sample of size T. Note that this test makes no assumption about the return distribution. As a result, this approach is fully nonparametric."*
[^6]: *"In its 1998 annual report, the U.S. commercial bank J.P. Morgan (JPM) explained that In 1998, daily revenue fell short of the downside (95 percent VAR) band on 20 days, or more than 5 percent of the time. Nine of these 20 occurrences fell within the August to October period."*
[^7]: *"We can test whether this was bad luck or a faulty model, assuming 252 days in the year. Based on Equation (6.2), we have z = (x-pT)/âˆšp(1-p) T = (20 - 0.05 Ã— 252)/âˆš0.05(0.95) 252 = 2.14. This is larger than the cutoff value of 1.96. Therefore, we reject the hypothesis that the VAR model is unbiased."*
[^8]: *"When designing a verification test, the user faces a tradeoff between these two types of error... For backtesting purposes, users of VAR models need to balance type 1 errors against type 2 errors."*
[^9]: *"LRuc = -2 In[(1 â€“ p)T-N pN] + 2 ln{[1 â€“ (N/T)]T-N (N/T)N} which is asymptotically (i.e., when T is large) distributed chi-square with one degree of freedom under the null hypothesis that p is the true probability. Thus we would reject the null hypothesis if LR > 3.841... In the JPM example, we had N = 20 exceptions over T = 252 days, using p = 95 percent VAR confidence level. Setting these numbers into Equation (6.3) gives LRuc = 3.91. Therefore, we reject unconditional coverage, as expected."*
[^10]: *"The table also shows that this interval, expressed as a proportion N/T, shrinks as the sample size increases. ... With more data, we should be able to reject the model more easily if it is false."*
[^11]:
